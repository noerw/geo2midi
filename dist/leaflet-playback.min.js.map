{"version":3,"sources":["?","../src/lib/storyline.js","../src/sequencer.js","../src/playhead.js","../src/control-playback.js"],"names":["exports","global","Event","this","start","end","action","from","to","duration","Storyline","points","get","id","t","averageData","parseStoryline","story","s","v","hasOwnProperty","storyboard","forEach","e","match","event","indexOf","parseFloat","ACTIONS","CUT","EASE","LINEAR","push","i","getPointInStoryline","storyline","value","j","length","console","warn","p","et","Math","max","min","easing","window","STORYLINE","Sequencer","onUpdate","sequence","updateloop","updateCallback","timeNow","performance","now","prototype","update","timestamp","position","_this","delta","newPos","sequenceData","trackName","requestAnimationFrame","ts","error","stop","cancelAnimationFrame","loadSequence","sequencer","context","L","Playhead","Layer","extend","options","cursorStyle","color","interactive","weight","shadowStyle","stroke","fillOpacity","fillColor","initialize","Util","setOptions","currentPos","cursor","polyline","shadowL","rectangle","shadowR","setStyle","setPosition","onAdd","map","addTo","setMinMax","onRemove","removeFrom","pos","maxDiff","minDiff","setLatLngs","getPosition","minMax","_map","mapBounds","getBounds","setBounds","_southWest","lng","_northEast","getMinMax","playhead","Control","Playback","includes","Mixin","Events","speed","loop","clickHandlers","btnPlay","btnPause","btnStop","btnLoop","oldPos","togglePlay","fire","playbackPosition","deltaTime","playing","on","_onClick","container","DomUtil","create","DomEvent","disableClickPropagation","innerHTML","href","addListener","toggleLoop","off","removeListener","pPos","clickPos","latlng","shift","originalEvent","shiftKey","ctrl","ctrlKey","preventDefault","classList","toggle","play","playbackPos","pause","sequenceStart","sequenceEnd","playbackSpeed","getPlaybackPosition","setPlaybackPosition","control","playback"],"mappings":"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","file":"leaflet-playback.min.js"}